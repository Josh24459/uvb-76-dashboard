<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>J.M UVB-76 Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Funpkg.com%2Fleaflet%2Fdist%2Fleaflet.css&data=05%7C02%7C%7Cf85b8d6b42494272d0b608ddb7b87476%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868725053584056%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=jAYSjeu5e0YETfTkURFZP1r2pRhmihNK1Mx8RzeGF5Q%3D&reserved=0" />

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #000;
      color: #eee;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    #header {
      display: flex;
      align-items: center;
      background: #111;
      padding: 10px 20px;
    }

    #header img {
      width: 120px;
    }

    #tabs {
      display: flex;
      background: #222;
    }

    #tabs button {
      flex: 1;
      background: #222;
      color: #eee;
      border: none;
      padding: 12px;
      cursor: pointer;
      font-weight: bold;
    }

    #tabs button.active {
      background: #444;
      color: #0f0;
    }

    #content {
      flex: 1;
      display: none;
      height: calc(100vh - 120px);
    }

    #content.active {
      display: block;
    }

    iframe, #map {
      width: 100%;
      height: 100%;
      border: none;
    }

    #anomaly, #log, #tools {
      padding: 20px;
      overflow-y: auto;
      height: calc(100% - 40px);
    }

    #logOutput {
      background: #000;
      border: 1px solid #0f0;
      padding: 10px;
      font-family: monospace;
      height: 200px;
      overflow-y: auto;
    }

    #logControls {
      margin-top: 10px;
    }

    #logControls button {
      background: #0f0;
      color: #000;
      border: none;
      padding: 8px 12px;
      margin-right: 5px;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <!-- Header -->
  <div id="header">
    <img src="logo.svg" alt="J.M Logo" />
  </div>

  <!-- Tabs -->
  <div id="tabs">
    <button class="tablink active" onclick="openTab('sdrTab')">üì° SDR</button>
    <button class="tablink" onclick="openTab('mapTab')">üó∫Ô∏è Map</button>
    <button class="tablink" onclick="openTab('anomalyTab')">üìà Anomaly Detection</button>
    <button class="tablink" onclick="openTab('logTab')">üìö Log</button>
    <button class="tablink" onclick="openTab('toolsTab')">‚öôÔ∏è Tools</button>
  </div>

  <!-- Content -->
  <div id="sdrTab" class="tabcontent active">
    <iframe id="sdrFrame" src="https://emea01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwebsdr.ewi.utwente.nl%3A8901%2F%3Ftune%3D4625am&data=05%7C02%7C%7Cf85b8d6b42494272d0b608ddb7b87476%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868725053611496%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=M3nuI83MF1H8qSxCJGM3vL8Lmvcw77hmy2ehmCzxC%2B8%3D&reserved=0"></iframe>
    <div style="padding: 10px; background: #111;">
      <button onclick="switchSDR('https://emea01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwebsdr.ewi.utwente.nl%3A8901%2F%3Ftune%3D4625am&data=05%7C02%7C%7Cf85b8d6b42494272d0b608ddb7b87476%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868725053631559%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=vWUfxCFaBk3W6qPNyfl6wDfrfk2HLnQVnfYDA3FLqzU%3D&reserved=0')">WebSDR (NL)</button>
      <button onclick="switchSDR('http://kiwisdr:8073/')">KiwiSDR</button>
      <button onclick="switchSDR('https://emea01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fmsk.swl.su%3A8073%2F&data=05%7C02%7C%7Cf85b8d6b42494272d0b608ddb7b87476%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868725053647503%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=YgvI1bI6P3ddI1JWa%2BhJ9jTmG1NY8U2z2WkARx6S4E8%3D&reserved=0')">Moscow SDR</button>
    </div>
  </div>

  <div id="mapTab" class="tabcontent">
    <div id="map"></div>
  </div>

  <div id="anomalyTab" class="tabcontent">
    <div id="anomaly">
      <h2>Anomaly Detection</h2>
      <p>Status: <span id="anomalyStatus">Normal</span></p>
      <p>Last Anomaly: <span id="lastAnomaly">None</span></p>
      <button onclick="simulateAnomaly()">Simulate Anomaly</button>
    </div>
  </div>

  <div id="logTab" class="tabcontent">
    <div id="log">
      <h2>Event Log</h2>
      <div id="logOutput"></div>
      <div id="logControls">
        <button onclick="addLog()">Add Log</button>
        <button onclick="clearLog()">Clear Log</button>
      </div>
    </div>
  </div>

  <div id="toolsTab" class="tabcontent">
    <div id="tools">
      <h2>Tools</h2>
      <p><a href="https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.sigidwiki.com%2Fwiki%2FUVB-76&data=05%7C02%7C%7Cf85b8d6b42494272d0b608ddb7b87476%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868725053667992%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=mPQScQ2wnBI%2BaW21xtZkkLt%2BviaHQS0l2waDzpVz6WQ%3D&reserved=0" target="_blank">Signal ID Wiki</a></p>
      <p><a href="https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.websdr.org%2F&data=05%7C02%7C%7Cf85b8d6b42494272d0b608ddb7b87476%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868725053683833%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=nhuc7xq5DnvMsrvjleEipDUbOn817OO%2BBOg9laQm7Wc%3D&reserved=0" target="_blank">More SDRs</a></p>
      <p><a href="https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.kiwisdr.com%2Fpublic%2F&data=05%7C02%7C%7Cf85b8d6b42494272d0b608ddb7b87476%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868725053701579%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=LnMAHYT6SmsD%2BOkW9ynh%2BOOLYDDBxhNxDIFCHfdXZlU%3D&reserved=0" target="_blank">Public KiwiSDR Directory</a></p>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Funpkg.com%2Fleaflet%2Fdist%2Fleaflet.js&data=05%7C02%7C%7Cf85b8d6b42494272d0b608ddb7b87476%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868725053717601%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=cUA1eaRqQivGYxBnC1ZOSh5VnD25QSbLzIC8reXC7B4%3D&reserved=0"></script>
  <script>
    // Tab logic
    function openTab(tabName) {
      document.querySelectorAll('.tabcontent').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tablink').forEach(btn => btn.classList.remove('active'));
      document.getElementById(tabName).classList.add('active');
      event.target.classList.add('active');
    }

    // Map
    const map = L.map('map').setView([56.087, 37.545], 8);
    L.tileLayer('https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Ftile.openstreetmap.org%2F&data=05%7C02%7C%7Cf85b8d6b42494272d0b608ddb7b87476%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868725053736414%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=ca6AS23TEKfyHupAajHhCXuFnV7r9EQxQTdflGGpKl0%3D&reserved=0{z}/{x}/{y}.png', {
      attribution: '¬© OpenStreetMap'
    }).addTo(map);
    L.marker([56.087, 37.545]).addTo(map).bindPopup('Approx. UVB-76').openPopup();

    // SDR switching
    function switchSDR(url) {
      document.getElementById('sdrFrame').src = url;
    }

    // Logs
    function addLog() {
      const log = document.getElementById('logOutput');
      const message = 'Log at ' + new Date().toLocaleTimeString();
      log.innerHTML += message + '<br>';
      log.scrollTop = log.scrollHeight;
      checkAnomaly(message);
    }

    function clearLog() {
      document.getElementById('logOutput').innerHTML = '';
    }

    // Anomaly detection logic (simple version)
    function checkAnomaly(message) {
      if (message.includes('ALERT')) {
        document.getElementById('anomalyStatus').innerText = '‚ö†Ô∏è Anomaly Detected';
        document.getElementById('lastAnomaly').innerText = new Date().toLocaleTimeString();
      }
    }

    function simulateAnomaly() {
      addLogEntry('ALERT: Strange pattern detected!');
    }

    function addLogEntry(message) {
      const log = document.getElementById('logOutput');
      log.innerHTML += message + '<br>';
      log.scrollTop = log.scrollHeight;
      checkAnomaly(message);
    }
  </script>
</body>
</html>

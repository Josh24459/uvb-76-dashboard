<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>J.M UVB-76 Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Funpkg.com%2Fleaflet%2Fdist%2Fleaflet.css&data=05%7C02%7C%7C7590e6993e524a4cfd7608ddb7ba37bd%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868732619269655%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=Wsd2eO%2FfqBSIvUXdFwyNBeFgK%2Fx68k8sfk18jD1gqSk%3D&reserved=0" />
  <style>
    body {
      margin: 0;
      background: #000;
      color: #eee;
      font-family: monospace;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    header {
      display: flex;
      align-items: center;
      background: #111;
      padding: 10px 20px;
    }
    header svg {
      height: 50px;
      margin-right: 20px;
    }
    h1 {
      font-weight: normal;
      color: #c97e7e;
    }
    nav {
      display: flex;
      background: #222;
    }
    nav button {
      flex: 1;
      background: #222;
      color: #eee;
      border: none;
      padding: 12px;
      cursor: pointer;
    }
    nav button.active {
      background: #333;
      color: #c97e7e;
    }
    main {
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    .tabcontent {
      flex: 1;
      display: none;
      flex-direction: column;
    }
    .tabcontent.active {
      display: flex;
    }
    iframe, #map {
      flex: 1;
      border: none;
    }
    .controls {
      background: #111;
      padding: 10px;
    }
    .controls button {
      background: #c97e7e;
      color: #000;
      border: none;
      padding: 8px 12px;
      margin-right: 5px;
      cursor: pointer;
    }
    #logBox {
      flex: 1;
      background: #111;
      padding: 10px;
      overflow-y: auto;
      font-family: monospace;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    a {
      color: #c97e7e;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

  <!-- Inline Rose Gold J.M Logo -->
  <header>
    <svg viewBox="0 0 200 50" xmlns="https://emea01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg&data=05%7C02%7C%7C7590e6993e524a4cfd7608ddb7ba37bd%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868732619312795%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=LWQYO20bd9WPVk19FofyQtQZlBGDBHOiZ5AEi6JOGLU%3D&reserved=0">
      <text x="0" y="40" font-size="40" fill="#c97e7e" font-family="monospace">J.M</text>
    </svg>
    <h1>UVB-76 Dashboard</h1>
  </header>

  <nav>
    <button class="tab active" data-tab="sdr">üì° SDR</button>
    <button class="tab" data-tab="map">üó∫Ô∏è Map</button>
    <button class="tab" data-tab="anomaly">üìà Anomaly</button>
    <button class="tab" data-tab="log">üìö Log</button>
    <button class="tab" data-tab="tools">‚öôÔ∏è Tools</button>
  </nav>

  <main>
    <!-- SDR Tab -->
    <section id="sdr" class="tabcontent active">
      <iframe id="sdrFrame" src="https://emea01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwebsdr.ewi.utwente.nl%3A8901%2F%3Ftune%3D4625am&data=05%7C02%7C%7C7590e6993e524a4cfd7608ddb7ba37bd%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868732619346479%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=N4T5dfnSmes7IwtoQUd1roLCQF79k9x5COJpI9WVpD0%3D&reserved=0"></iframe>
      <div class="controls">
        <button onclick="switchSDR('https://emea01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwebsdr.ewi.utwente.nl%3A8901%2F%3Ftune%3D4625am&data=05%7C02%7C%7C7590e6993e524a4cfd7608ddb7ba37bd%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868732619369028%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=%2BZS7QO9C0YPmM3rB4DixpCcSxf0PDNP3FW1KOQGJ18U%3D&reserved=0')">WebSDR (NL)</button>
        <button onclick="switchSDR('http://kiwisdr:8073/')">KiwiSDR</button>
        <button onclick="switchSDR('https://emea01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fmsk.swl.su%3A8073%2F&data=05%7C02%7C%7C7590e6993e524a4cfd7608ddb7ba37bd%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868732619388823%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=7h5mCx4Ti781%2BvKKZkaqrLgTL7vJpnAc7FVi9Uc9bl4%3D&reserved=0')">Moscow SDR</button>
      </div>
    </section>

    <!-- Map Tab -->
    <section id="map" class="tabcontent">
      <div id="mapContainer" style="flex: 1;">
        <div id="map" style="width: 100%; height: 100%;"></div>
      </div>
    </section>

    <!-- Anomaly Tab -->
    <section id="anomaly" class="tabcontent">
      <h2>Anomaly Detection</h2>
      <p>Status: <span id="status">Normal</span></p>
      <p>Last Anomaly: <span id="lastAnomaly">None</span></p>
      <button onclick="simulateAnomaly()">Simulate Anomaly</button>
    </section>

    <!-- Log Tab -->
    <section id="log" class="tabcontent">
      <h2>Event Log</h2>
      <div id="logBox"></div>
      <div class="controls">
        <button onclick="addLog()">Add Log</button>
        <button onclick="clearLog()">Clear Log</button>
      </div>
    </section>

    <!-- Tools Tab -->
    <section id="tools" class="tabcontent">
      <h2>Tools & Resources</h2>
      <ul>
        <li><a href="https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.sigidwiki.com%2Fwiki%2FUVB-76&data=05%7C02%7C%7C7590e6993e524a4cfd7608ddb7ba37bd%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868732619409577%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=cAdTgP5aAvvwAyv0cBCLljTBB3tgoXH27e2xSfzH4PI%3D&reserved=0" target="_blank">Signal ID Wiki</a></li>
        <li><a href="https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.websdr.org%2F&data=05%7C02%7C%7C7590e6993e524a4cfd7608ddb7ba37bd%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868732619430646%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=EGvg4scs4jTIkMxT3tRrKUEnmrE5C7m74HQK8r%2BV9u0%3D&reserved=0" target="_blank">More SDRs</a></li>
        <li><a href="https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.kiwisdr.com%2Fpublic%2F&data=05%7C02%7C%7C7590e6993e524a4cfd7608ddb7ba37bd%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868732619452456%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=fI1ZHoeRPOJ8tA94hBI1o5RcTlk8TakeCd6i1aPSiSA%3D&reserved=0" target="_blank">Public KiwiSDR Directory</a></li>
      </ul>
    </section>
  </main>

  <!-- Leaflet JS -->
  <script src="https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Funpkg.com%2Fleaflet%2Fdist%2Fleaflet.js&data=05%7C02%7C%7C7590e6993e524a4cfd7608ddb7ba37bd%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868732619474122%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=dyE9LrZwW6XJLPUZmup5b%2BrlhU59rcx8kndGdX9WiQw%3D&reserved=0"></script>
  <script>
    // Tabs
    const tabs = document.querySelectorAll(".tab");
    const tabContents = document.querySelectorAll(".tabcontent");

    tabs.forEach(tab => {
      tab.addEventListener("click", () => {
        tabs.forEach(btn => btn.classList.remove("active"));
        tabContents.forEach(content => content.classList.remove("active"));

        tab.classList.add("active");
        document.getElementById(tab.dataset.tab).classList.add("active");

        if (tab.dataset.tab === "map") {
          setTimeout(() => {
            map.invalidateSize();
          }, 100); // Fix for Leaflet map size
        }
      });
    });

    // SDR switcher
    function switchSDR(url) {
      document.getElementById('sdrFrame').src = url;
    }

    // Map init
    const map = L.map('map').setView([56.087, 37.545], 8);
    L.tileLayer('https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Ftile.openstreetmap.org%2F&data=05%7C02%7C%7C7590e6993e524a4cfd7608ddb7ba37bd%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C638868732619495612%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=IFcGrK5in1hQRhAAgo9QoEmCYSPgleiUltmpGfEoWpQ%3D&reserved=0{z}/{x}/{y}.png', {
      attribution: '¬© OpenStreetMap'
    }).addTo(map);
    L.marker([56.087, 37.545]).addTo(map).bindPopup('Approx. UVB-76').openPopup();

    // Log + Anomaly
    function addLog() {
      const box = document.getElementById('logBox');
      const entry = 'Event at ' + new Date().toLocaleTimeString();
      box.innerHTML += entry + '<br>';
      box.scrollTop = box.scrollHeight;
      checkAnomaly(entry);
    }

    function clearLog() {
      document.getElementById('logBox').innerHTML = '';
    }

    function simulateAnomaly() {
      const box = document.getElementById('logBox');
      const entry = 'ALERT: Pattern anomaly ' + new Date().toLocaleTimeString();
      box.innerHTML += entry + '<br>';
      box.scrollTop = box.scrollHeight;
      checkAnomaly(entry);
    }

    function checkAnomaly(entry) {
      if (entry.includes('ALERT')) {
        document.getElementById('status').innerText = '‚ö†Ô∏è Anomaly Detected';
        document.getElementById('lastAnomaly').innerText = new Date().toLocaleTimeString();
      }
    }
  </script>

</body>
</html>
